<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Listagem de Produtos</title>
        <link rel="stylesheet" th:href="@{/bootstrap-5.3.3-dist/css/bootstrap.min.css}">
    </head>
    <body>
        <div class="container mt-5">
            <h2>Listagem de Produtos</h2>
            <div class="mb-3">
                <form th:action="@{/produtos/listar}" method="get">
                    <input type="text" name="keyword" th:value="${keyword}" placeholder="Buscar produto...">
                    <button type="submit">Buscar</button>
                </form>
            </div>
            <table class="table mt-3">
                <thead>
                    <tr>
                        <th>Código</th>
                        <th>Nome</th>
                        <th>Quantidade em Estoque</th>
                        <th>Preço</th>
                        <th>Status</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Utilizando Thymeleaf para iterar sobre a lista de produtos -->
                    <tr th:each="produto : ${produtosPage.content}">
                        <td th:text="${produto.id}"></td>
                        <td th:text="${produto.nome}"></td>
                        <td th:text="${produto.qtdEstoque}"></td>
                        <td th:text="${produto.preco}"></td>
                        <td th:text="${produto.status ? 'Ativo' : 'Inativo'}"></td>
                        <td>
                            <a th:href="@{/produtos/editar/{id}(id=${produto.id})}">Editar</a>
                            <a th:href="@{/produtos/inativar/{id}(id=${produto.id})}">Inativar</a>
                            <a th:href="@{/produtos/reativar/{id}(id=${produto.id})}">Reativar</a>
                            <a th:href="@{/produtos/visualizar/{id}(id=${produto.id})}">Visualizar</a>
                        </td>
                    </tr>
                </tbody>
            </table>
            <!-- Barra de paginação -->
            <ul class="pagination">
                <li th:if="${produtosPage.hasPrevious()}">
                    <a th:href="@{/produtos/listar(page=0,keyword=${keyword})}" aria-label="Primeira">
                        <span aria-hidden="true">Primeira</span>
                    </a>
                </li>
                <li th:if="${produtosPage.hasPrevious()}">
                    <a th:href="@{/produtos/listar(page=${produtosPage.previousPageable().pageNumber},keyword=${keyword})}" aria-label="Anterior">
                        <span aria-hidden="true">Anterior</span>
                    </a>
                </li>
                <li th:if="${produtosPage.hasNext()}">
                    <a th:href="@{/produtos/listar(page=${produtosPage.nextPageable().pageNumber},keyword=${keyword})}" aria-label="Próxima">
                        <span aria-hidden="true">Próxima</span>
                    </a>
                </li>
                <li th:if="${produtosPage.hasNext()}">
                    <a th:href="@{/produtos/listar(page=${produtosPage.totalPages - 1},keyword=${keyword})}" aria-label="Última">
                        <span aria-hidden="true">Última</span>
                    </a>
                </li>
            </ul>
            <!-- Botão para chamar a tela de cadastro de produto -->
            <a th:href="@{/produtos/form}" style="text-decoration: none; color: inherit;"><span style="font-size: 24px; cursor: pointer;">&#43;</span>Adicionar Produto</a>

        </div>
        <!-- Importando scripts do Bootstrap e jQuery -->
        <script th:src="@{/jquery-3.6.0-dist/jquery-3.6.0.min.js}"></script>
        <script th:src="@{/bootstrap-5.3.3-dist/js/bootstrap.min.js}"></script>
    </body>
</html>
